{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "description": "Configurable parameters for the eks-node-monitoring-agent",
    "$ref": "#/definitions/EKSNodeMonitoringAgent",
    "definitions": {
        "EKSNodeMonitoringAgent": {
            "title": "EKSNodeMonitoringAgent",
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "global": {
                    "$ref": "$/definitions/Global"
                },
                "monitoringAgent": {
                    "$ref": "#/definitions/MonitoringAgent"
                },
                "dcgmAgent": {
                    "$ref": "#/definitions/DCGMAgent"
                }
            }
        },
        "MonitoringAgent": {
            "title": "MonitoringAgent",
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "additionalArgs": {
                    "type": "array",
                    "description": "Additional arguments passed to the eks node monitoring agent pod",
                    "default": [],
                    "items": {
                        "type": "string"
                    }
                },
                "podAnnotations": {
                    "$ref": "#/definitions/StringMap",
                    "description": "Annotations applied to the eks node monitoring agent pod. These annotations are merged with any global pod annotations, with component specific annotations taking precedence in the case of a conflict.",
                    "default": {}
                },
                "podLabels": {
                    "$ref": "#/definitions/StringMap",
                    "description": "Labels applied to the eks node monitoring agent pod. These labels are merged with any global pod labels, with component specific labels taking precedence in the case of a conflict.",
                    "default": {}
                },
                "resources": {
                    "$ref": "#/definitions/Resources"
                },
                "tolerations": {
                    "$ref": "#/definitions/Tolerations"
                },
                "monitors": {
                    "type": "object",
                    "description": "Per-monitor configuration keyed by plugin name",
                    "additionalProperties": false,
                    "properties": {
                        "kernel-monitor": {
                            "$ref": "#/definitions/MonitorSettings"
                        },
                        "networking": {
                            "$ref": "#/definitions/MonitorSettings"
                        },
                        "storage-monitor": {
                            "$ref": "#/definitions/MonitorSettings"
                        },
                        "nvidia": {
                            "$ref": "#/definitions/MonitorSettings"
                        },
                        "neuron": {
                            "$ref": "#/definitions/MonitorSettings"
                        },
                        "runtime": {
                            "$ref": "#/definitions/MonitorSettings"
                        }
                    }
                }
            }
        },
        "DCGMAgent": {
            "title": "DCGMAgent",
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "podAnnotations": {
                    "$ref": "#/definitions/StringMap",
                    "description": "Annotations applied to the eks node monitoring agent pod. These annotations are merged with any global pod annotations, with component specific annotations taking precedence in the case of a conflict.",
                    "default": {}
                },
                "podLabels": {
                    "$ref": "#/definitions/StringMap",
                    "description": "Labels applied to the eks node monitoring agent pod. These labels are merged with any global pod labels, with component specific labels taking precedence in the case of a conflict.",
                    "default": {}
                },
                "resources": {
                    "$ref": "#/definitions/Resources"
                },
                "tolerations": {
                    "$ref": "#/definitions/Tolerations"
                }
            }
        },
        "Global": {
            "title": "Global",
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "podLabels": {
                    "$ref": "#/definitions/StringMap",
                    "description": "Labels applied to all pods deployed by the eks-node-monitoring-agent chart. These labels are merged with any component specific pod labels, with component specific labels taking precedence in the case of a conflict.",
                    "default": {}
                },
                "podAnnotations": {
                    "$ref": "#/definitions/StringMap",
                    "description": "Annotations applied to all pods deployed by the eks-node-monitoring-agent chart. These annotations are merged with any component specific pod annotations, with component specific annotations taking precedence in the case of a conflict.",
                    "default": {}
                }
            }
        },
        "Resources": {
            "title": "Resources",
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "requests": {
                    "$ref": "#/definitions/Limits"
                },
                "limits": {
                    "$ref": "#/definitions/Limits"
                }
            }
        },
        "Limits": {
            "title": "Limits",
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "memory": {
                    "type": "string"
                },
                "cpu": {
                    "type": "string"
                }
            }
        },
        "Tolerations": {
            "title": "Tolerations",
            "type": "array",
            "items": {
                "type": "object"
            }
        },
        "MonitorSettings": {
            "title": "MonitorSettings",
            "type": "object",
            "description": "Per-monitor settings",
            "additionalProperties": false,
            "properties": {
                "enabled": {
                    "type": "boolean",
                    "description": "Whether this monitor is enabled",
                    "default": true
                }
            }
        },
        "StringMap": {
            "title": "StringMap",
            "type": "object",
            "description": "Key-value pairs of strings",
            "additionalProperties": {
                "type": "string"
            }
        }
    }
}
